<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anniversary Quest ‚Äî For My Love üíñ</title>
  <style>
    :root{
      --bg:#0f0f14;--card:#171826;--ink:#f5f7fb;--muted:#c9cbe0;
      --accent:#ff4d8d;--accent2:#6ae3ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:radial-gradient(1200px 600px at 80% -10%,#1b1b2f 0%,#0f0f14 40%),#0f0f14; color:var(--ink); display:flex;align-items:center;justify-content:center; padding:20px}
    .app{width:min(980px,100%); background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015)); border:1px solid rgba(255,255,255,.06); border-radius:24px; box-shadow:0 20px 50px rgba(0,0,0,.45); overflow:hidden; position:relative}
    header{padding:18px 20px; display:flex; align-items:center; gap:14px; border-bottom:1px solid rgba(255,255,255,.08)}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800}
    .heart{width:30px;height:30px;display:grid;place-items:center;background:var(--accent);color:#111;border-radius:10px;box-shadow:0 10px 22px rgba(255,77,141,.35)}
    .brand small{display:block;font-size:12px;color:var(--muted);font-weight:600}
    .progress{height:8px;background:#1f2130;border-radius:999px;overflow:hidden;flex:1;margin-left:auto}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .35s ease}

    main{padding:20px; display:grid; grid-template-columns:1fr; gap:18px}
    .card{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:20px; padding:18px}
    .center{display:grid;place-items:center;text-align:center}
    h1{margin:8px 0 6px;font-size:28px}
    p.lead{margin:0;color:var(--muted)}
    .hero-img{width:100%; max-height:360px; object-fit:cover; border-radius:16px; border:1px solid rgba(255,255,255,.06); cursor:pointer; transition: transform .35s ease, box-shadow .35s ease}
    .hero-img.clickable:hover{ transform:scale(1.02); box-shadow:0 22px 44px rgba(0,0,0,.5); }
    /* New: Flip Card CSS */
    .flip-card-container {
      width: 100%;
      height: 360px; /* Same as max-height of hero-img */
      position: relative;
      perspective: 1000px;
      cursor: pointer;
    }
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 1s;
      transform-style: preserve-3d;
      border-radius: 16px;
    }
    .flip-card-container.rotated .flip-card-inner {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
    }
    .flip-card-front img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px;
    }
    .card-journey-text {
        font-size: 16px;
        color: rgba(0, 0, 0, 0.7);
        font-weight: 600;
        margin-top: 10px;
        line-height: 1.4;
        width: 100%;
  	height: 100%;
    }
    .flip-card-back {
      background-color: var(--accent);
      color: #000;
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column; /* This is new, to stack the elements */
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-weight: 800;
      line-height: 1.4;
    }

    .options{display:grid; gap:12px; margin-top:16px}
    button.option{width:100%; padding:14px 16px; border-radius:14px; background:#1f2130; border:1px solid rgba(255,255,255,.08); color:var(--ink); font-size:16px; cursor:pointer; transition:.18s transform,.18s background,.18s border}
    button.option:hover{transform:translateY(-1px)}
    button.option:disabled{opacity:.7;cursor:default}

    .nav{display:flex; gap:10px; justify-content:center; margin-top:10px}
    .btn{padding:12px 16px; border-radius:12px; background:linear-gradient(90deg,var(--accent),var(--accent2)); border:none; color:#111; font-weight:800; cursor:pointer; box-shadow:0 8px 22px rgba(0,0,0,.25)}
    .btn.secondary{background:#24263a;color:var(--ink); border:1px solid rgba(255,255,255,.08)}

    .caption{color:var(--muted); margin-top:10px}
    .shayari{font-size:18px; line-height:1.6; white-space:pre-line}

    footer{padding:10px 18px 18px; color:var(--muted); text-align:center}

    /* Celebration layer */
    .celebrate{pointer-events:none; position:absolute; inset:0; display:grid; place-items:center}
    .toast{
      background:#111a; border:1px solid rgba(255,255,255,.18); padding:12px 14px; border-radius:12px;
      backdrop-filter: blur(6px); font-weight:600; opacity:0; transform:translateY(10px) scale(.98);
      animation:toast-in .35s ease forwards;
      max-width:min(90%,720px); text-align:center;
    }
	@keyframes confettiFall {
  0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}

.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  background: red;
  animation: confettiFall 3s linear forwards;
  z-index: 9999;
}

    @keyframes toast-in{to{opacity:1; transform:translateY(0) scale(1)}}

    /* Hearts & Balloons */
    .burst{position:absolute; width:0; height:0; inset:0; overflow:visible; pointer-events:none}
    .particle{
      position:absolute; left:50%; top:55%;
      width:14px; height:14px; transform:translate(-50%,-50%) rotate(45deg);
      opacity:0; animation:fly 1800ms ease-out forwards;
    }
    .particle.heart{background:var(--accent)}
    .particle.heart::before,.particle.heart::after{
      content:""; position:absolute; width:14px; height:14px; background:var(--accent); border-radius:50%
    }
    .particle.heart::before{left:-7px}
    .particle.heart::after{top:-7px}

    .particle.balloon{
      width:16px;height:22px;border-radius:10px 10px 12px 12px;background:var(--accent2);
      box-shadow:0 8px 16px rgba(0,0,0,.25);
    }
    .particle.balloon::after{
      content:""; position:absolute; bottom:-6px; left:50%; width:2px; height:10px; background:#d0f8ff; transform:translateX(-50%);
    }

    @keyframes fly{
      5%{opacity:1}
      100%{
        transform:translate(var(--tx), var(--ty)) rotate(45deg);
        opacity:0
      }
    }

    /* ---- Envelope (pink/red) ---- */
    .envelope-wrap{display:grid;place-items:center;min-height:360px}
    .envelope{
      position:relative; width:min(640px,92vw); aspect-ratio:4/3; cursor:pointer;
      filter:drop-shadow(0 18px 36px rgba(0,0,0,.45));
      transform-style:preserve-3d; perspective:1200px;
    }
    .env-body{
      position:absolute; inset:0; border-radius:18px; overflow:hidden;
      background:linear-gradient(180deg,#ff7aa6 0%, #ff5b8f 35%, #e43d6b 100%);
      border:1px solid rgba(255,255,255,.35);
    }
    .env-liner{
      position:absolute; inset:10px; border-radius:14px;
      background:repeating-linear-gradient(45deg, rgba(255,255,255,.06) 0 14px, rgba(255,255,255,.03) 14px 28px);
      opacity:.7; mix-blend-mode:screen;
    }
    .env-flap{
      position:absolute; left:0; right:0; top:0; height:55%;
      background:linear-gradient(180deg,#ff9dbd 0%, #ff6c98 60%, #d83a68 100%);
      clip-path:polygon(0 0,100% 0,50% 100%);
      border-top-left-radius:18px; border-top-right-radius:18px;
      transform-origin:50% 0; transform:rotateX(0deg); transition:transform .9s cubic-bezier(.2,.8,.1,1);
      border:1px solid rgba(255,255,255,.6); border-bottom:none;
      z-index:30;
    }
    .env-stamp{
  position:absolute; 
  right:18px; 
  top:18px; 
  width:68px; 
  height:68px; 
  border-radius:10px;
  background-image: url('assets/20.jpg');
  background-size: cover;
  background-position: center;
  /* background:radial-gradient(circle at 30% 30%, #ffd1e2, #ff96b3 60%, #ff6a90); */
  box-shadow:0 6px 16px rgba(0,0,0,.25); 
  border:1px dashed rgba(255,255,255,.85);
  transform:rotate(-8deg); 
  z-index:40;
}
    .env-seal{
      position:absolute; left:50%; top:46%; transform:translate(-50%,-50%);
      width:82px; height:82px; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #fff, #ffd6e6 55%, #ff93b4);
      box-shadow:0 8px 20px rgba(0,0,0,.25);
      display:grid; place-items:center; font-weight:900; color:#b31448; letter-spacing:.5px;
      border:2px solid #fff; z-index:35;
    }
    .env-seal:before{content:"‚ù§"; font-size:28px; opacity:.9}

    .envelope.open .env-flap{ transform:rotateX(-170deg); transition:transform .9s cubic-bezier(.2,.8,.1,1); }
    .envelope.open .env-seal{ opacity:0; transition:opacity .4s .45s; }

    /* revealed photo */
    .mail-content{ margin-top:16px; text-align:center }
    .mail-photo{ width:min(640px,92vw); max-height:60vh; object-fit:cover; border-radius:16px; border:1px solid rgba(255,255,255,.18); box-shadow:0 14px 34px rgba(0,0,0,.45); cursor:pointer; opacity:0; transform:translateY(16px) scale(.98); transition:opacity .45s, transform .45s; z-index:10 }
    .mail-photo.show{ opacity:1; transform:translateY(0) scale(1); }

    .shayari-typed{ display:inline-block; text-align:left; font-size:18px; line-height:1.7; margin-top:12px; color:var(--ink); min-height:56px; white-space:pre-wrap; }

    /* small helper */
    .small-muted{ color:var(--muted); font-size:13px; margin-top:8px }

    @media (max-width:520px){ h1{font-size:22px} .env-seal{width:60px;height:60px} .env-stamp{width:52px;height:52px} }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="brand">
        <div class="heart">‚ù§</div>
        <div>
          Anniversary Quest for Riya
          <small>Made with love by Anirban</small>
        </div>
      </div>
      <div class="progress" aria-label="progress"><div class="bar" id="bar"></div></div>
      <button class="btn secondary" id="soundBtn" aria-pressed="false">üîà Music</button>
    </header>
    <main>
      <div class="card center" id="stage"></div>
    </main>

    <div class="celebrate">
      <div id="toastWrap"></div>
      <div id="burst" class="burst"></div>
    </div>

    <footer>
     </footer>
  </div>

  <!-- audio -->
<audio id="firstSong" src="assets/firstSong.MP3" preload="auto"></audio>
<audio id="secondSong" src="assets/secondSong.MP3" preload="auto"></audio>
  <audio id="bgm" loop>
    <source src="" type="audio/mpeg">
  </audio>
  <audio id="crinkle">
    <source src="assets/i-love-you-cartoon-voice-136531.MP3" type="audio/mpeg">
  </audio>

  <script>
    var firstSong = document.getElementById('firstSong');
    var secondSong = document.getElementById('secondSong');

    // Add an event listener to the first song
    firstSong.addEventListener('ended', function() {
        secondSong.play(); // Play the second song after the first one ends
    });

    // Make the second song loop
    secondSong.loop = true;
    "use strict";

    const GF_NAME = "Riya";
    const ANNIV_TEXT = "Happy 1st Anniversary";

    /* photo breaks - placeholders (replace with your files & shayari) */
    const PHOTO_BREAKS = [
      { src:"assets/1.jpg", caption:"Jahaan tum ho, wahaan main hoon. Mera dil se dil tak ka safar bas tum tak hai.‚ù§Ô∏è‚ù§Ô∏è" },
      { src:"assets/2.jpg", caption:"Tumhari aankhon ka jaadu, mere dil ko bhaaye. Tumhari muskaan ki khushboo, mere khwaabon mein samaaye." },
      { src:"assets/3.jpg", caption:"Yeh ishq hai Ghalib bhi na bata paaye. Nazren mili, dil dhadka, aur zamana bhool gaye." },
      { src:"assets/4.jpg", caption:"Teri dhadkan hi zindagi ka kissa hai mera, tu zindagi ka ek aham hissa hai mera." },
      { src:"assets/5.jpeg", caption:"Mere paas mere habib aa zara aur dil se kareeb aa. Tujhe dhadkano mein basa loon main, ki bichadne ka koi dar na ho." },
      { src:"assets/6.jpeg", caption:"Agar mujhe samajh aaya hai ki pyaar kya hai, to vah tumhari vajah se hai." },
      { src:"assets/7.jpeg", caption:"Teri baahon mein hi milta hai mujhe sukoon, yeh duniya ke saare toofan yahin khatm ho jaate hain." },
      { src:"assets/8.jpeg", caption:"Jab khamosh nigaahon se baat hoti hai, to aise hi mohabbat ki shuruaat hoti hai." },
      { src:"assets/9.jpeg", caption:"Pyaar woh ehsaas hai jo andar se roshni karta hai." },
      { src:"assets/10.jpeg", caption:"Tum mere liye wahi ho, jo aasmaan ke liye chaand hai" },
      { src:"assets/11.jpeg", caption:"Pyaar mein milna zaroori nahi, pyaar mein izhaar bhi zaroori nahi. Zaroori sirf ehsaas hai jo zindagi sanwaare, unhe paana ya na paana zaroori nahi." },
      { src:"assets/13.jpeg", caption:"Humesha ke liye bas tera hoon." },
      { src:"assets/14.jpeg", caption:"Tere saath chalna, har kadam par bas tera hona. Yeh zindagi tere bina, bas ek sapna hai sona." },
      { src:"assets/15.jpeg", caption:"Meri namkeen si zindagi ki mithaas ho tum." },
      { src:"assets/16.jpeg", caption:"Mohabbat mein gussa aur shaq wahi karta hai, jisme mohabbat koot-koot ke bhari hoti hai." },
      { src:"assets/17.jpeg", caption:"Tum hi ho, jo meri zindagi se kabhi judaa nahi ho sakte." },
      { src:"assets/18.jpeg", caption:"I fell in love with your soul before I touched your skin." },
      { src:"assets/19.jpg", caption:"Tumhari khushi, meri khushi hai." },
    ];
    const PHOTO_MIN_SPAN = 5;
    const PHOTO_MAX_SPAN = 10;
    const PHOTOS_PER_GROUP = 2;

    /* ---------- QUESTION BANK (60) ---------- */
    const QUESTION_BANK = [
      { q:"What part of me do you secretly love the most?", options:[ {text:"My lips",msg:"So you‚Äôve been staring at my lips all this time, huh? Naughty üòâ"}, {text:"My hands",msg:"Guess I should hold you more often‚Ä¶ forever."}, {text:"My voice",msg:"So my voice is your weakness? I‚Äôm going to whisper in your ear more often now."}, {text:"My whole body",msg:"Woah, Maa‚Ä¶ you really don‚Äôt hold back üòè."} ] },
      { q:"If I kissed you slowly in the middle of a conversation, what would you do?", options:[ {text:"Pull me closer",msg:"You‚Äôd pull me closer? Don‚Äôt tempt me to try it right now."}, {text:"Smile and kiss back",msg:"That smile with a kiss‚Ä¶ you‚Äôd kill me with sweetness."}, {text:"Lose track of what we were saying",msg:"Exactly‚Ä¶ who needs words when we have this?"}, {text:"Not let me stop",msg:"You wouldn‚Äôt let me stop? Maa‚Ä¶ now you‚Äôre speaking my language üòè."} ] },
      { q:"Which kiss makes your heart race the most?", options:[ {text:"Neck kiss",msg:"Ah‚Ä¶ the weak spot. Duly noted."}, {text:"Long, deep kiss",msg:"You like it intense‚Ä¶ I love that."}, {text:"Playful bite on the lip",msg:"Maa‚Ä¶ you‚Äôre making me imagine things."}, {text:"Whispered kiss on the ear",msg:"Dangerous choice‚Ä¶ that‚Äôs how I‚Äôll drive you crazy."} ] },
      { q:"If I whispered something naughty in your ear right now, how would you react?", options:[ {text:"Blush instantly",msg:"Awww‚Ä¶ my Maa blushing is the cutest thing."}, {text:"Bite your lip",msg:"Now that‚Äôs unfair‚Ä¶ you know I can‚Äôt resist when you do that."}, {text:"Say ‚Äòprove it‚Äô",msg:"Challenge accepted, Maa üòè."}, {text:"Pull me into a kiss",msg:"You‚Äôre damn bold‚Ä¶ I like it."} ] },
      { q:"Where do you wish I‚Äôd kiss you more often?", options:[ {text:"Lips",msg:"Oh, Maa‚Ä¶ I‚Äôll keep those lips busy then."}, {text:"Neck",msg:"Danger zone, huh? I‚Äôm all in."}, {text:"Collarbone",msg:"Maa, you just gave me my next mission."}, {text:"Somewhere only you know üòè",msg:"Now you‚Äôre keeping secrets from me? I‚Äôm coming to find out."} ] },
      { q:"If we were alone in a dark room, what would you want to happen first?", options:[ {text:"Hug tightly",msg:"Safe in my arms‚Ä¶ always."}, {text:"Start kissing",msg:"Straight to the point, huh?"}, {text:"Whisper sweet things",msg:"I‚Äôll whisper until you melt."}, {text:"Let the moment take over",msg:"Maa‚Ä¶ you‚Äôre trouble, and I love it."} ] },
      { q:"What‚Äôs your favorite ‚Äúaccidental‚Äù touch from me?", options:[ {text:"My hand brushing your thigh",msg:"Oh, you noticed that?"}, {text:"My fingers touching your hair",msg:"I‚Äôll do it more often now."}, {text:"My arm sliding around your waist",msg:"Mine. Always mine."}, {text:"My lips brushing against your cheek",msg:"Next time, I won‚Äôt stop at the cheek."} ] },
      { q:"If I said ‚ÄúI want you‚Äù right now, what would you do?", options:[ {text:"Smile and say ‚ÄúI‚Äôm yours‚Äù",msg:"Forever mine, Maa ‚ù§Ô∏è."}, {text:"Tease me back",msg:"Careful‚Ä¶ you know I‚Äôll win."}, {text:"Close the distance instantly",msg:"That‚Äôs my Maa."}, {text:"Ask, ‚ÄúHow much?‚Äù with a smirk",msg:"Enough to make you forget everything else."} ] },
      { q:"Which one turns you on more?", options:[ {text:"Slow, teasing touches",msg:"We‚Äôll take it slow then‚Ä¶ very slow."}, {text:"Intense eye contact",msg:"Maa‚Ä¶ you know what that does to me."}, {text:"Whispering your name",msg:"I‚Äôll whisper it till you shiver."}, {text:"All of the above",msg:"So you basically want me to ruin you‚Ä¶ got it."} ] },
      { q:"If we woke up together in the morning, what would you want first?", options:[ {text:"Breakfast in bed",msg:"I‚Äôll feed you‚Ä¶ and then kiss you."}, {text:"Cuddles under the blanket",msg:"You‚Äôll never get out of my arms."}, {text:"Lazy morning kisses",msg:"Best way to start a day with my Maa."}, {text:"Another round of sleep‚Ä¶ or something else üòè",msg:"Something else, huh? I like where this is going."} ] },

      /* 11 - 20 */
      { q:"What‚Äôs your secret weakness when it comes to me?", options:[ {text:"My smell",msg:"I‚Äôll make sure you can‚Äôt forget it."}, {text:"My eyes",msg:"They only see you."}, {text:"My touch",msg:"I‚Äôll never stop touching you then."}, {text:"My voice",msg:"I‚Äôll keep talking until you melt."} ] },
      { q:"If I pinned you against the wall, what would you do?", options:[ {text:"Push me away playfully",msg:"Maa‚Ä¶ you wouldn‚Äôt last long."}, {text:"Pull me closer",msg:"That‚Äôs what I like to hear."}, {text:"Whisper something naughty",msg:"You‚Äôre dangerous, and I love it."}, {text:"Kiss me hard",msg:"Straight to the point‚Ä¶ I‚Äôm in trouble."} ] },
      { q:"Which part of my body do you secretly want to explore more?", options:[ {text:"My chest",msg:"I‚Äôll let you."}, {text:"My hair",msg:"Run your fingers through it anytime."}, {text:"My back",msg:"You‚Äôll find more than you expect."}, {text:"All of me",msg:"Maa‚Ä¶ you‚Äôre greedy, and I like it."} ] },
      { q:"If I blindfolded you, how would you feel?", options:[ {text:"Nervous but excited",msg:"I‚Äôll make sure it‚Äôs worth it."}, {text:"Completely ready",msg:"Oh, you trust me that much?"}, {text:"Curious and playful",msg:"I‚Äôll keep you guessing."}, {text:"Wildly impatient",msg:"Maa‚Ä¶ you‚Äôre making my job easier."} ] },
      { q:"What‚Äôs your favorite time for romance?", options:[ {text:"Early morning",msg:"Wake-up calls just got interesting."}, {text:"Late at night",msg:"Darkness is our friend."}, {text:"Afternoon surprises",msg:"I‚Äôll keep you on your toes."}, {text:"Anytime, anywhere",msg:"Maa‚Ä¶ you‚Äôre my kind of person."} ] },
      { q:"If I kissed you and didn‚Äôt stop, how long would you last?", options:[ {text:"A few seconds",msg:"Liar üòè."}, {text:"A few minutes",msg:"I‚Äôll test that."}, {text:"As long as you want",msg:"Challenge accepted."}, {text:"Forever",msg:"Now that‚Äôs the right answer."} ] },
      { q:"Which naughty thought crosses your mind most about me?", options:[ {text:"Kissing you",msg:"Then what‚Äôs stopping you?"}, {text:"Touching you",msg:"My body‚Äôs all yours."}, {text:"Holding you close",msg:"I‚Äôll never let go."}, {text:"All of the above",msg:"Maa‚Ä¶ you‚Äôre hopelessly mine."} ] },
      { q:"If I ran my hand slowly down your back, what would you do?", options:[ {text:"Shiver",msg:"I‚Äôd keep doing it."}, {text:"Turn around and kiss me",msg:"Smart choice."}, {text:"Pull me closer",msg:"That‚Äôs my Maa."}, {text:"Tell me to keep going",msg:"Maa‚Ä¶ you‚Äôre so bold."} ] },
      { q:"If I leaned in really close but didn‚Äôt kiss you, what would you do?", options:[ {text:"Kiss me first",msg:"I wouldn‚Äôt complain."}, {text:"Wait for me to make the move",msg:"I‚Äôll make it unforgettable."}, {text:"Tease me",msg:"Dangerous game, Maa."}, {text:"Pull me in anyway",msg:"You always win."} ] },
      { q:"If I said ‚ÄúTonight is yours,‚Äù what would you do?", options:[ {text:"Smile and blush",msg:"That smile is all I need."}, {text:"Take control",msg:"I‚Äôm yours anyway."}, {text:"Ask ‚ÄúAre you sure?‚Äù",msg:"Absolutely sure."}, {text:"Whisper ‚ÄúI‚Äôve been waiting for this‚Äù",msg:"Then let‚Äôs not waste time."} ] },

      /* 21 - 30 */
      { q:"What‚Äôs the first thing you notice when I start undressing?", options:[ {text:"My lips",msg:"Hmm‚Ä¶ I see you‚Äôre a kisser before anything else. üòò"}, {text:"My chest",msg:"Naughty girl‚Ä¶ you have your priorities. üòâ"}, {text:"My abs (or belly)",msg:"Ohhh, someone‚Äôs been looking closely‚Ä¶ üòè"}, {text:"My‚Ä¶ lower part",msg:"Damn! Straight to business, huh? üî•"} ] },
      { q:"Which type of kiss turns you on the most?", options:[ {text:"Slow & deep",msg:"You love to savor every second‚Ä¶ just like me. ‚ù§Ô∏è"}, {text:"Quick but passionate",msg:"You like it short but intense‚Ä¶ dangerous combo. üî•"}, {text:"Biting & teasing",msg:"Ahh, you‚Äôre a playful little troublemaker. üòè"}, {text:"Everywhere kisses",msg:"OMG‚Ä¶ you‚Äôre making me melt already. ü•µ"} ] },
      { q:"Where would you want me to kiss you when we‚Äôre alone?", options:[ {text:"Neck",msg:"The way you shiver when I kiss there‚Ä¶ mmm. üòò"}, {text:"Behind your ear",msg:"That whisper and warm breath will drive you crazy. üî•"}, {text:"Inner thigh",msg:"You‚Äôre bold, and I like it. üòè"}, {text:"Everywhere",msg:"Ohhh baby, you‚Äôre too hot to handle. ü•µ"} ] },
      { q:"What‚Äôs your favorite thing I do in bed?", options:[ {text:"Holding you tight",msg:"You feel safest in my arms‚Ä¶ and I love it. ‚ù§Ô∏è"}, {text:"Whispering in your ear",msg:"You love when I talk naughty, don‚Äôt you? üòâ"}, {text:"Kissing you slowly",msg:"You want me to take my time‚Ä¶ oh, I will. üòò"}, {text:"Making you scream my name",msg:"Oh damn, Riya‚Ä¶ you‚Äôre really naughty. üî•"} ] },
      { q:"If I blindfold you, what‚Äôs the first thing you want me to do?", options:[ {text:"Kiss your lips",msg:"You want it soft and loving first. ‚ù§Ô∏è"}, {text:"Bite your neck",msg:"You want to be teased till you can‚Äôt take it. üòè"}, {text:"Run my hands all over you",msg:"You want to feel me everywhere‚Ä¶ mmm. üî•"}, {text:"Surprise you completely",msg:"Oh, you‚Äôre a dangerous little mystery lover. üòâ"} ] },
      { q:"If we were alone in the shower, what would you do?", options:[ {text:"Wash my hair",msg:"Sweet and caring‚Ä¶ but I know your real thoughts. üòâ"}, {text:"Push me against the wall",msg:"Damn! Straight to the hot scene. ü•µ"}, {text:"Kiss me under the water",msg:"That‚Äôs a movie scene I‚Äôd love to live. ‚ù§Ô∏è"}, {text:"Soap me up slowly",msg:"Naughty and slippery‚Ä¶ I like it. üòè"} ] },
      { q:"Which clothing of mine turns you on most?", options:[ {text:"Shirt unbuttoned halfway",msg:"You love the tease. üòâ"}, {text:"Towel around my waist",msg:"Mmm‚Ä¶ fresh out of the shower fantasy. üî•"}, {text:"Tight jeans",msg:"Ohh, checking me out, are we? üòè"}, {text:"No clothes at all",msg:"Straightforward and deadly naughty. ü•µ"} ] },
      { q:"If I text you ‚ÄúI‚Äôm in the mood‚Äù at midnight, what‚Äôs your reply?", options:[ {text:"‚ÄúI‚Äôm on my way‚Äù",msg:"Damn‚Ä¶ you‚Äôre quick! üòâ"}, {text:"‚ÄúTell me more‚Ä¶‚Äù",msg:"You like the build-up‚Ä¶ teasing queen. üòè"}, {text:"‚ÄúI‚Äôm already waiting‚Äù",msg:"Whoa‚Ä¶ someone‚Äôs eager. üî•"}, {text:"Send a picture",msg:"Ohhhh‚Ä¶ you‚Äôre dangerous. ü•µ"} ] },
      { q:"Where do you want me to touch you first when we‚Äôre alone?", options:[ {text:"Your waist",msg:"You love it slow and sweet. ‚ù§Ô∏è"}, {text:"Your back",msg:"Mmm‚Ä¶ you love that warm hold. üòè"}, {text:"Your face",msg:"Romantic baby. üòò"}, {text:"Your‚Ä¶ special place",msg:"No patience at all‚Ä¶ and I like it. üî•"} ] },
      { q:"What‚Äôs the wildest place you‚Äôd make out with me?", options:[ {text:"Kitchen counter",msg:"Ohh, chef‚Äôs kiss in a whole new way. üòè"}, {text:"Car backseat",msg:"Steamy windows‚Ä¶ love it. üî•"}, {text:"Beach at night",msg:"Waves, wind, and us‚Ä¶ perfect. ‚ù§Ô∏è"}, {text:"Elevator",msg:"Fast, risky, and hot‚Ä¶ dangerous combo. üòâ"} ] },

      /* 31 - 40 */
      { q:"If I tied your hands, what would you say?", options:[ {text:"‚ÄúBe gentle‚Äù",msg:"Cute‚Ä¶ but I know you want more. üòâ"}, {text:"‚ÄúDon‚Äôt stop‚Äù",msg:"Oh baby, you‚Äôre bold. üî•"}, {text:"‚ÄúSurprise me‚Äù",msg:"You‚Äôre ready for anything‚Ä¶ dangerous. üòè"}, {text:"‚ÄúDo your worst‚Äù",msg:"Damn‚Ä¶ you‚Äôre playing with fire. ü•µ"} ] },
      { q:"How long do you like foreplay to last?", options:[ {text:"Just a minute",msg:"Straight to the main show. üòâ"}, {text:"5‚Äì10 mins",msg:"You like the perfect balance. ‚ù§Ô∏è"}, {text:"15+ mins",msg:"You love the tease‚Ä¶ and I‚Äôll deliver. üòè"}, {text:"As long as possible",msg:"Ohhh‚Ä¶ you‚Äôre dangerous. üî•"} ] },
      { q:"Which naughty text from me would turn you on most?", options:[ {text:"‚ÄúI can‚Äôt stop thinking about you‚Äù",msg:"Melting already, huh? ‚ù§Ô∏è"}, {text:"‚ÄúI want you right now‚Äù",msg:"Damn, your heart skipped a beat. üòâ"}, {text:"‚ÄúGuess what I‚Äôm not wearing‚Äù",msg:"You‚Äôre blushing right now, I know. üòè"}, {text:"A picture without words",msg:"Dangerous move‚Ä¶ but you‚Äôd love it. ü•µ"} ] },
      { q:"If I woke you up at 3 AM for something naughty, what would you do?", options:[ {text:"Push me away",msg:"Liar‚Ä¶ I know you‚Äôd give in. üòâ"}, {text:"Pull me closer",msg:"That‚Äôs my girl. ‚ù§Ô∏è"}, {text:"Take control",msg:"Ohhh‚Ä¶ feisty! üòè"}, {text:"Let me do anything I want",msg:"Damn‚Ä¶ Riya, you‚Äôre making me crazy. üî•"} ] },
      { q:"Which part of my body would you bite first?", options:[ {text:"Lip",msg:"Soft but teasing‚Ä¶ I like it. üòâ"}, {text:"Neck",msg:"Instant goosebumps. ‚ù§Ô∏è"}, {text:"Shoulder",msg:"Ohh‚Ä¶ you‚Äôre getting bold. üòè"}, {text:"Somewhere lower",msg:"Damn‚Ä¶ you‚Äôre too hot. ü•µ"} ] },
      { q:"What‚Äôs your favorite sound in bed?", options:[ {text:"My moans",msg:"Ohhh‚Ä¶ you naughty listener. üòâ"}, {text:"Your moans",msg:"You love hearing yourself lose control. üî•"}, {text:"The whispers",msg:"Soft and deadly‚Ä¶ like you. ‚ù§Ô∏è"}, {text:"The silence before the storm",msg:"Mmm‚Ä¶ dangerous anticipation. üòè"} ] },
      { q:"What outfit of yours would you wear to drive me crazy?", options:[ {text:"Short dress",msg:"Legs for days. üòâ"}, {text:"Lingerie",msg:"Deadly hot‚Ä¶ and you know it. üî•"}, {text:"My shirt only",msg:"Damn‚Ä¶ you‚Äôd kill me with that look. üòè"}, {text:"Nothing at all",msg:"Straight to my weakness. ü•µ"} ] },
      { q:"What would you do if I whispered ‚Äúlet‚Äôs do it here‚Äù?", options:[ {text:"Blush and say no",msg:"Cute‚Ä¶ but you‚Äôre thinking yes. üòâ"}, {text:"Look around and agree",msg:"Risky and thrilling‚Ä¶ love it. üî•"}, {text:"Take my hand",msg:"Silent yes‚Ä¶ and I‚Äôd follow. ‚ù§Ô∏è"}, {text:"Pull me right there",msg:"Ohhh‚Ä¶ Riyaaa. ü•µ"} ] },
      { q:"If you could freeze time for an hour with me, what would we do?", options:[ {text:"Just kiss",msg:"Sweet and pure‚Ä¶ but I know your mind. üòâ"}, {text:"Cuddle in bed",msg:"Warm and loving‚Ä¶ my baby. ‚ù§Ô∏è"}, {text:"Explore each other slowly",msg:"You‚Äôre a passionate soul. üòè"}, {text:"Go completely wild",msg:"Damn‚Ä¶ I‚Äôd never unfreeze time. üî•"} ] },
      { q:"Which one sounds hotter to you?", options:[ {text:"Making love slowly",msg:"You‚Äôre all about the feels. ‚ù§Ô∏è"}, {text:"Passionate & rough",msg:"Ohhh‚Ä¶ you‚Äôre a wild one. üî•"}, {text:"Teasing till you beg",msg:"I can make that happen. üòè"}, {text:"Mixing all of them",msg:"Dangerous‚Ä¶ but perfect. ü•µ"} ] },

      /* 41 - 50 */
      { q:"After marriage, will you be comfortable walking around the house completely naked in front of me?", options:[ {text:"Yes, I‚Äôd love that every day",msg:"You‚Äôre gonna make it very hard for me to ever leave the house. üî•"}, {text:"Maybe sometimes, if you behave",msg:"Guess I‚Äôll have to be a very good husband then. üòè"}, {text:"Only when I want to tease you",msg:"That‚Äôs torture, and I‚Äôll still love every second of it. ‚ù§Ô∏è"}, {text:"No, I‚Äôm too shy for that",msg:"I‚Äôll make sure to change that one day. üòâ"} ] },
      { q:"After marriage, how would you wake me up in the morning?", options:[ {text:"With kisses all over your face",msg:"Best alarm clock ever. üíã"}, {text:"By climbing on top of you",msg:"You‚Äôre dangerous, and I like it. üî•"}, {text:"By whispering naughty things in your ear",msg:"That‚Äôs gonna make my mornings‚Ä¶ very hot. üòà"}, {text:"By making your favorite breakfast in bed",msg:"You‚Äôre perfect wife material. ‚ù§Ô∏è"} ] },
      { q:"After marriage, would you be okay with us taking a shower together every day?", options:[ {text:"Yes, every single day",msg:"Water bill‚Äôs gonna go up, but so will my heartbeat. üí¶"}, {text:"Only when we have time",msg:"Then I‚Äôll make time, always. üòâ"}, {text:"Only on weekends",msg:"Weekend goals, sorted. ‚ù§Ô∏è"}, {text:"No, I like my solo showers",msg:"Guess I‚Äôll have to sneak in. üòè"} ] },
      { q:"After marriage, will you let me see you change clothes without covering up?", options:[ {text:"Always",msg:"I‚Äôll never get tired of that view. üî•"}, {text:"Only if you deserve it",msg:"Challenge accepted. üòà"}, {text:"Sometimes, to drive you crazy",msg:"I‚Äôm already crazy about you. ‚ù§Ô∏è"}, {text:"Nope, I‚Äôll keep you guessing",msg:"I‚Äôll be guessing‚Ä¶ and imagining. üòâ"} ] },
      { q:"After marriage, how often should we kiss in a day?", options:[ {text:"As many times as possible",msg:"Get ready for non-stop kisses then. üíã"}, {text:"Every hour at least once",msg:"Hourly love doses ‚Äî I approve. üòç"}, {text:"Morning and night",msg:"Perfect way to start and end my day. ‚ù§Ô∏è"}, {text:"Only when we feel like it",msg:"I‚Äôll make sure we feel like it‚Ä¶ all the time. üòâ"} ] },
      { q:"After marriage, how often do you think we should make love?", options:[ {text:"Every single day",msg:"You‚Äôre my dream wife already. üî•"}, {text:"A few times a week",msg:"That‚Äôs still enough to keep my heart racing. ‚ù§Ô∏è"}, {text:"Whenever the mood strikes",msg:"My mood will strike‚Ä¶ a lot. üòè"}, {text:"Only on special occasions",msg:"Then every day will be a special occasion. üòà"} ] },
      { q:"After marriage, would you let me give you a full body massage‚Ä¶ with oil?", options:[ {text:"Yes, anytime you want",msg:"You‚Äôre tempting fate‚Ä¶ and me. üí¶"}, {text:"Only when I‚Äôm stressed",msg:"Then I‚Äôll keep you stressed‚Ä¶ just a little. üòâ"}, {text:"Only if it leads to more",msg:"Trust me, it definitely will. üî•"}, {text:"No, I‚Äôm too ticklish",msg:"I‚Äôll still find a way to make you melt. ‚ù§Ô∏è"} ] },
      { q:"After marriage, how would you greet me when I come home from work?", options:[ {text:"With a tight hug and deep kiss",msg:"That‚Äôs exactly how I want to end my workday. üòç"}, {text:"By jumping into my arms",msg:"You‚Äôll make me drop my bag‚Ä¶ and my self-control. üî•"}, {text:"By whispering ‚Äúwelcome home, husband‚Äù in my ear",msg:"That‚Äôs gonna make me want to take you straight to the bedroom. üòà"}, {text:"With a smile and dinner ready",msg:"Wife of the year award‚Ä¶ already yours. ‚ù§Ô∏è"} ] },
      { q:"After marriage, would you be okay with skinny dipping with me at night?", options:[ {text:"Yes, that sounds thrilling",msg:"You‚Äôre adventurous‚Ä¶ and I love it. üî•"}, {text:"Maybe if no one‚Äôs around",msg:"Then I‚Äôll find us the perfect hidden spot. üòâ"}, {text:"Only if you go first",msg:"Challenge accepted. üòè"}, {text:"No way, too risky",msg:"Guess I‚Äôll have to convince you. ‚ù§Ô∏è"} ] },
      { q:"After marriage, would you let me sleep without clothes next to you?", options:[ {text:"Yes, and I‚Äôll do the same",msg:"You‚Äôre literally my fantasy. üî•"}, {text:"Only on hot nights",msg:"Then I‚Äôll make sure every night feels hot. üòè"}, {text:"Sometimes, to tease you",msg:"I‚Äôll be teased‚Ä¶ and tortured. ‚ù§Ô∏è"}, {text:"No, I prefer pajamas",msg:"I‚Äôll slowly make you change your mind. üòâ"} ] },

      /* 51 - 60 */
      { q:"After marriage, how would you surprise me at night?", options:[ {text:"By wearing something very revealing",msg:"You‚Äôll leave me speechless‚Ä¶ and restless. üî•"}, {text:"By sneaking into bed without me noticing",msg:"You‚Äôre dangerous in the best way possible. üòè"}, {text:"By waking me up with kisses",msg:"I‚Äôll pretend to be asleep just for that. ‚ù§Ô∏è"}, {text:"By whispering something naughty in my ear",msg:"That‚Äôs how you start a wildfire in my heart. üòà"} ] },
      { q:"After marriage, would you let me undress you slowly every night?", options:[ {text:"Yes, I‚Äôd love that",msg:"I‚Äôll turn every night into a fantasy. üî•"}, {text:"Only when I‚Äôm in the mood",msg:"I‚Äôll make sure you‚Äôre always in the mood. üòâ"}, {text:"Only if I can undress you too",msg:"Then it‚Äôs a deal‚Ä¶ every single night. ‚ù§Ô∏è"}, {text:"No, I like doing it myself",msg:"Guess I‚Äôll just have to help. üòè"} ] },
      { q:"After marriage, would you cook for me wearing only an apron?", options:[ {text:"Yes, definitely",msg:"You‚Äôll burn more than just the food. üî•"}, {text:"Maybe on special nights",msg:"I‚Äôll mark every night as special. üòà"}, {text:"Only if you join me",msg:"Then the kitchen‚Äôs about to get really hot. üòâ"}, {text:"No, I‚Äôd be too shy",msg:"I‚Äôll make sure that shyness disappears. ‚ù§Ô∏è"} ] },
      { q:"After marriage, how would you tempt me the most?", options:[ {text:"By wearing my shirt and nothing else",msg:"That‚Äôs my weakness, and you know it. üî•"}, {text:"By kissing me unexpectedly",msg:"I‚Äôll never want those kisses to stop. ‚ù§Ô∏è"}, {text:"By sitting on my lap and teasing me",msg:"You‚Äôll break my self-control. üòà"}, {text:"By sending me naughty texts at work",msg:"I‚Äôll be rushing home in seconds. üòâ"} ] },
      { q:"After marriage, would you let me take you on a romantic getaway just for making love?", options:[ {text:"Yes, 100%",msg:"Then pack your bags‚Ä¶ and no clothes. üî•"}, {text:"Maybe, if I get to choose the place",msg:"Anywhere with you is perfect. ‚ù§Ô∏è"}, {text:"Only if we try something new there",msg:"Then we‚Äôll make unforgettable memories. üòè"}, {text:"No, that‚Äôs too much",msg:"I‚Äôll change your mind‚Ä¶ slowly. üòâ"} ] },
      { q:"After marriage, would you let me kiss every part of your body?", options:[ {text:"Yes, please",msg:"You‚Äôre in trouble‚Ä¶ the good kind. üî•"}, {text:"Only if you can handle it",msg:"I‚Äôll handle it‚Ä¶ and ask for more. üòà"}, {text:"Sometimes, when I want to feel loved",msg:"I‚Äôll make you feel loved every single day. ‚ù§Ô∏è"}, {text:"No, that‚Äôs too much for me",msg:"Then I‚Äôll start with small kisses‚Ä¶ and keep going. üòâ"} ] },
      { q:"After marriage, would you be okay with us making love in risky places?", options:[ {text:"Yes, I love the thrill",msg:"You‚Äôre a wild one‚Ä¶ and I love it. üî•"}, {text:"Maybe once or twice",msg:"Once won‚Äôt be enough for me. üòè"}, {text:"Only if it‚Äôs private enough",msg:"I‚Äôll find us the perfect hidden spots. üòâ"}, {text:"No, I‚Äôm too shy for that",msg:"I‚Äôll still dream about it. ‚ù§Ô∏è"} ] },
      { q:"After marriage, would you let me sleep with my hand on you all night?", options:[ {text:"Yes, that‚Äôs sweet",msg:"You‚Äôll never escape my touch. ‚ù§Ô∏è"}, {text:"Only if you behave",msg:"I‚Äôll try‚Ä¶ no promises. üòè"}, {text:"Yes, but only sometimes",msg:"Sometimes is better than never. üòâ"}, {text:"No, I need space to sleep",msg:"Then I‚Äôll steal it anyway. üî•"} ] },
      { q:"After marriage, how would you handle me staring at you when you‚Äôre changing?", options:[ {text:"Let you look",msg:"I‚Äôll never look away. üî•"}, {text:"Tease me even more",msg:"You‚Äôll make me lose my mind. üòà"}, {text:"Pretend you didn‚Äôt notice",msg:"I‚Äôll still be memorizing every detail. ‚ù§Ô∏è"}, {text:"Tell me to stop",msg:"I won‚Äôt. üòâ"} ] },
      { q:"After marriage, would you let me carry you to the bed when I‚Äôm in the mood?", options:[ {text:"Yes, I‚Äôd love that",msg:"Then be ready, because I‚Äôll do it often. üî•"}, {text:"Only if I‚Äôm in the mood too",msg:"I‚Äôll make sure we‚Äôre in sync. ‚ù§Ô∏è"}, {text:"Sometimes, to keep it special",msg:"Every time will be special for me. üòè"}, {text:"No, I prefer walking myself",msg:"I‚Äôll still sweep you off your feet. üòâ"} ] }
    ];

    /* ----------------- runtime helpers ----------------- */
    const stage = document.getElementById("stage");
    const bar = document.getElementById("bar");
    const toastWrap = document.getElementById("toastWrap");
    const burst = document.getElementById("burst");
    const crinkleAudio = document.getElementById("crinkle");
    const AUTO_NEXT_MS = 2200;

    const introCover = { img:"assets/12.jpeg" };

    // shuffle
    function shuffle(a){ const c=a.slice(); for(let i=c.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [c[i],c[j]]=[c[j],c[i]] } return c; }

    // build slides with photo breaks randomly (questions randomized)
    function buildSlides(){
      const qs = shuffle(QUESTION_BANK).map(q=>({type:"question", ...q}));
      const slides = [{type:"landing", ...introCover}];
      let i=0, photoIdx=0;
      while(i<qs.length){
        const span = Math.min(Math.floor(Math.random()*(PHOTO_MAX_SPAN-PHOTO_MIN_SPAN+1))+PHOTO_MIN_SPAN, qs.length - i);
        for(let k=0;k<span;k++) slides.push(qs[i+k]);
        i += span;
        // insert photos group
        for(let g=0; g<PHOTOS_PER_GROUP && photoIdx<PHOTO_BREAKS.length && i<qs.length; g++, photoIdx++){
          const p = PHOTO_BREAKS[photoIdx];
          slides.push({type:"photo", src:p.src, caption:p.caption});
        }
      }
      slides.push({type:"finale"});
      return slides;
    }

    let slides = buildSlides();
    let idx = 0;

    function setProgress(){
      const total = slides.length-1;
      bar.style.width = Math.max(0, Math.min(100, (idx / total) * 100)) + "%";
    }

    function showToast(text){
      toastWrap.innerHTML = "";
      const t = document.createElement("div");
      t.className = "toast";
      t.textContent = text;
      toastWrap.appendChild(t);
	setTimeout(() => {
            toastWrap.innerHTML = "";
        }, 2000);

    }
function celebrateBurst(){
  for (let i = 0; i < 30; i++) {
        let confetti = document.createElement("div");
    confetti.classList.add("confetti");

    // random position & color
    confetti.style.left = Math.random() * 100 + "vw";
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    confetti.style.animationDuration = (Math.random() * 2 + 2) + "s";

    document.body.appendChild(confetti);

    // remove after animation
    setTimeout(() => confetti.remove(), 3000);
  }
}


    function render(){
      setProgress();
      const s = slides[idx];
      if(!s) return;
      if(s.type==="landing"){
  stage.innerHTML = `
    <div class="flip-card-container" id="flipCard">
      <div class="flip-card-inner" id="flipCardInner">
        <div class="flip-card-front">
          <img id="landingImg" class="hero-img clickable" src="${s.img}" alt="cover">
        </div>
        <div class="flip-card-back center">
          <div class="first-back-content">
            <div class="card-message">Happy 1st Anniversary, Riya My Love‚ù§Ô∏è‚ù§Ô∏è!</div>
            <div class="card-journey-text">I have some questions, do you want to answer it? then click me, please Babeüòè.</div>
          </div>
          <div class="second-back-content" style="display:none;">
            <div class="card-message" style="font-size: 20px;">
              For My Riyaüòò
            </div>
            <div class="card-journey-text" style="font-size: 12px;">
              It's hard to believe a whole year has passed since we began this beautiful journey.<br>
              Every single day with you has been a gift, a memory I will cherish forever.<br>
              You've filled my life with a warmth and a joy I never knew existed.<br>
              The love we share is my greatest adventure, my most treasured destination.<br>
              With you, every challenge feels conquerable and every moment is sweeter.<br>
              You are my best friend, my confidante, and my greatest love.<br>
              Thank you for a year of laughter, growth, and unwavering support.<br>
              Thank you for being you, in every way.<br>
              I am a better man because of you.<br>
              Here's to the first of many anniversaries, and a lifetime of adventures together.<br>
              I love you more than words can say.
            </div>
          </div>
        </div>
      </div>
    </div>
  `;

  const flipCard = document.getElementById("flipCard");
  const flipCardInner = document.getElementById("flipCardInner");

  let cardState = 0; // 0: front, 1: first back, 2: second back
  let isTransitioning = false; // Prevents clicks during the animation

  flipCard.onclick = () => {
  if (isTransitioning) return;
  isTransitioning = true;

  if (cardState === 0) {
    // First click: rotate to the first back
    flipCard.classList.add('rotated');
    firstSong.play();
    cardState = 1;
    setTimeout(() => { isTransitioning = false; }, 1000);

  } else if (cardState === 1) {
    // Second click: show second back content
    flipCardInner.style.transform = 'rotateY(180deg)'; // continue rotation forward
    document.querySelector('.first-back-content').style.display = 'none';
    document.querySelector('.second-back-content').style.display = 'block';
    cardState = 2;
    setTimeout(() => { isTransitioning = false; }, 1000); // short delay to avoid accidental double-click

  } else if (cardState === 2) {
    // Third click: go directly to Q&A
    idx++;
    render();
  }
};


  return;
}

      if(s.type==="question"){
        stage.innerHTML = `
          <h1>For ${GF_NAME} ‚Äî Question</h1>
          <p class="lead">${s.q}</p>
          <div class="options" id="opts"></div>
          <div class="caption small-muted">Question ${slides.slice(0, idx+1).filter(x=>x.type==='question').length} of ${slides.filter(x=>x.type==='question').length}</div>
        `;
        const opts = document.getElementById("opts");
        s.options.forEach(opt=>{
          const btn = document.createElement("button");
          btn.className = "option";
          btn.textContent = opt.text;
          btn.onclick = ()=>{
            // lock all buttons
            opts.querySelectorAll("button.option").forEach(b=>b.disabled=true);
            // celebrate + message
            showToast(opt.msg);
            celebrateBurst();
            // auto next after short delay
            setTimeout(()=>{ idx++; render(); }, AUTO_NEXT_MS);
          };
          opts.appendChild(btn);
        });
        return;
      }

      if(s.type==="photo"){
        // envelope + hidden photo + shayari
        stage.innerHTML = `
          <div class="envelope-wrap">
            <div class="envelope" id="envelope">
              <div class="env-body"></div>
              <div class="env-liner"></div>
              <div class="env-flap" id="envFlap"></div>
              <div class="env-stamp"></div>
              <div class="env-seal"></div>
            </div>

            <div class="mail-content" id="mailContent" style="display:none">
              <img src="${s.src}" alt="memory" class="mail-photo" id="mailPhoto">
              <div class="shayari-typed" id="shayari"></div>
              <div class="small-muted">Click the photo once revealed to continue</div>
            </div>
          </div>
        `;

        const envelope = document.getElementById("envelope");
        const envFlap = document.getElementById("envFlap");
        const mailContent = document.getElementById("mailContent");
        const mailPhoto = document.getElementById("mailPhoto");
        const shayariEl = document.getElementById("shayari");

        let opened = false;
        let typed = false;
        // when envelope or seal clicked -> open and reveal content + typewriter
        envelope.onclick = async ()=>{
          if(!opened){
            // open flap (class toggles CSS)
            envelope.classList.add("open");
            // play crinkle
            try{ crinkleAudio.currentTime = 0; await crinkleAudio.play().catch(()=>{}); }catch(e){}
            // after flap animation delay, show photo container
            setTimeout(()=>{
              mailContent.style.display = "block";
              // reveal photo with animation
              requestAnimationFrame(()=> mailPhoto.classList.add("show"));
              // start typewriter for caption
              startTypewriter(s.caption || "", shayariEl);
              opened = true;
            }, 620); // small delay to sync with flap
          }
        };

        // second click on photo -> move next
        mailPhoto.onclick = ()=>{
          if(opened){
            // if typing still happening, finish instantly
            if(isTyping) { finishTypingNow(); return; }
            // otherwise go next
            idx++; render();
          }
        };

        // typewriter control
        let isTyping = false;
        let typingTimer = null;
        let currentText = "";
        function startTypewriter(txt, el){
          if(!txt) return;
          isTyping = true;
          el.textContent = "";
          currentText = txt;
          let i = 0;
          const speed = 28; // ms per char
          typingTimer = setInterval(()=>{
            i++;
            el.textContent = currentText.slice(0,i);
            if(i >= currentText.length){
              clearInterval(typingTimer);
              isTyping = false;
              typed = true;
            }
          }, speed);
        }
        function finishTypingNow(){
          if(typingTimer) clearInterval(typingTimer);
          document.getElementById("shayari").textContent = currentText;
          isTyping = false;
          typed = true;
        }

        return;
      }

      if(s.type==="finale"){
        stage.innerHTML = `
          <h1>Mission Pyaar Complete üéâ</h1>
          <img class="hero-img" src="assets/cover.jpg" alt="hearts background">
          <p class="caption">${GF_NAME}, tum meri favorite notification ho. ${ANNIV_TEXT}. Bas yuhi saath chalna ‚Äî aage bahut lambi kahani likhni hai. üíû</p>
          <div class="nav">
            <button class="btn" id="replay">Play Again</button>
            <button class="btn secondary" id="reshuffle">Shuffle & Replay</button>
          </div>
        `;
        document.getElementById("replay").onclick = ()=>{ idx = 1; render(); };
        document.getElementById("reshuffle").onclick = ()=>{ slides = buildSlides(); idx = 1; render(); };
        return;
      }
    } // render end

    // music toggle
    const bgm = document.getElementById("bgm");
    const soundBtn = document.getElementById("soundBtn");
    soundBtn.onclick = async ()=>{
      if(bgm.paused){ await bgm.play().catch(()=>{}); soundBtn.textContent='üîä Music'; soundBtn.setAttribute('aria-pressed','true'); }
      else{ bgm.pause(); soundBtn.textContent='üîà Music'; soundBtn.setAttribute('aria-pressed','false'); }
    };

    // kick off
    render();
 // Get the image and audio elements
    var startImage = document.getElementById('landingImg');
    var firstSong = document.getElementById('firstSong');
    var secondSong = document.getElementById('secondSong');

    // Add an event listener to the image
    startImage.addEventListener('click', function() {
        firstSong.play(); // Start the first song when the image is clicked
    });

    // Add an event listener to the first song to play the second one
    firstSong.addEventListener('ended', function() {
        secondSong.play();
    });

    // Make the second song loop indefinitely
    secondSong.loop = true;
 </script>
</body>
</html>
